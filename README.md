# SportsGPT

SportsGPT is a full-stack application that surfaces live sports insights with AI-generated commentary.

## Architecture overview

- **Frontend**: React + Vite (deployed to Netlify/Vercel)
- **Backend**: Bun + Hono + SQLite (deployed to Fly.io)
- **AI & Data Providers**: OpenAI GPT-4o-mini for summarisation and API-Sports for live statistics

## Local development

### Backend
1. `cd backend`
2. `bun install`
3. Provide the required environment variables:
   - `OPENAI_API_KEY`
   - `SPORTS_API_KEY`
   - Optional: `DATABASE_URL` (defaults to `/data/sqlite.db`)
4. Run the API: `bun run src/index.ts`
   - The server listens on `0.0.0.0:${PORT}` (default `3000`).
   - Database migrations run automatically on boot.

### Frontend
1. `npm install`
2. Ensure `VITE_API_BASE_URL` points at the backend (e.g. `http://localhost:3000`).
3. Run the dev server: `npm run dev`
   - Vite serves the UI on port `5173`.

## Deployment checklist

### Fly.io backend
- `PORT` must be set to `3000` and the app must bind to `0.0.0.0` (handled by the code).
- Migrations execute through the Fly release command (`bun run src/db/migrate.ts`).
- A persistent volume named `sportsgpt_data` should be attached at `/data`.

### Netlify / Vercel frontend
- Expose `VITE_API_BASE_URL` so builds use the correct backend URL.
- The production build output lives in the `dist/` directory generated by `npm run build`.

## Continuous Integration

GitHub Actions runs:
- Frontend build (`npm run build`).
- Backend installation, migrations, and a smoke-test health check (`bun run src/index.ts --smoke-test`).

## Useful commands

- `bun run src/db/migrate.ts` – execute database migrations manually.
- `bun run src/index.ts --smoke-test` – start the server, hit `/health`, and exit (used in CI).
- `npm run build` – produce an optimised frontend bundle.

## Status

- ✅ Backend and database migrations
- ✅ Frontend build and deployment configuration
- ⚠️ Provide valid API keys in production for OpenAI and API-Sports access
