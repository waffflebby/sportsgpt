# SportsGPT

Live demo: https://sports-gpt-gamma.vercel.app

SportsGPT is a full-stack application that surfaces live sports insights with AI-generated commentary.

## Architecture overview

- **Frontend**: React + Vite (deployed to Vercel)
- **Backend**: Bun + Hono + SQLite (deployed to Fly.io at https://backend-bold-smoke-6218.fly.dev)
- **AI & Data Providers**: OpenAI GPT-4o-mini for summarisation and API-Sports for live statistics

## Local development

### Backend
1. `cd backend`
2. `bun install`
3. Provide the required environment variables:
   - `OPENAI_API_KEY`
   - `SPORTS_API_KEY`
   - Optional: `DATABASE_URL` (defaults to `/data/sqlite.db`)
4. Run database migrations once: `bun run src/db/migrate.ts`
5. Start the API: `bun run src/index.ts`
   - The server listens on `0.0.0.0:${PORT}` (default `3000`).

### Frontend
1. `npm install`
2. Copy `.env.example` to `.env` and ensure `VITE_API_BASE_URL` points at the backend (e.g. `http://localhost:3000`).
3. Run the dev server: `npm run dev`
   - Vite serves the UI on port `5173`.

## Deployment checklist

### Fly.io backend
- `PORT` must be set to `3000` and the app must bind to `0.0.0.0` (handled by the code).
- `ENTRYPOINT []` in the Dockerfile prevents Bun from launching a duplicate server.
- Migrations execute through the Fly release command (`bun run src/db/migrate.ts`).
- A persistent volume named `sportsgpt_data` should be attached at `/data`.

### Vercel frontend
- Expose `VITE_API_BASE_URL` so builds use the correct backend URL (set to `https://backend-bold-smoke-6218.fly.dev`).
- The production build output lives in the `dist/` directory generated by `npm run build`.

## Continuous Integration

GitHub Actions runs:
- Frontend build (`npm run build`).
- Backend installation, migrations, and a smoke-test health check (`bun run src/index.ts --smoke-test`).

## Useful commands

- `bun run src/db/migrate.ts` – execute database migrations manually.
- `bun run src/index.ts --smoke-test` – start the server, hit `/health`, and exit (used in CI).
- `npm run build` – produce an optimised frontend bundle.

## Status

- ✅ Backend and database migrations
- ✅ Frontend build and deployment configuration
- ✅ Production CORS and environment variables configured
- ✅ API keys set for OpenAI and API-Sports access
